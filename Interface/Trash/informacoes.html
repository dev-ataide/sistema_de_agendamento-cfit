<!DOCTYPE html>
<html>
<head>
  <title>Informações de Clientes, Agendamentos e Serviços</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-5">
    <h1 class="text-center">Informações de Clientes, Agendamentos e Serviços</h1>

    <!-- Campo de entrada para inserir o ID do cliente -->
    <div class="form-group">
      <label for="clienteIdInput">Insira o ID do Cliente:</label>
      <input type="text" id="clienteIdInput" class="form-control" placeholder="ID do Cliente">
      <button class="btn btn-primary mt-2" onclick="fetchInformacoesPorId()">Buscar</button>
    </div>

    <div class="row mt-4" id="infoContainer">
      <!-- Informações do Cliente -->
      <div class="col-md-4">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Cliente</h5>
            <p class="card-text">
              <strong>Nome:</strong> <span id="clienteNome"></span> <br>
              <strong>Telefone:</strong> <span id="clienteTelefone"></span> <br>
              <strong>Email:</strong> <span id="clienteEmail"></span> <br>
              <strong>Nome do Pacote:</strong> <span id="clienteNomePacote"></span> <br>
              <strong>IDAS Restantes:</strong> <span id="clienteIdasRestantes"></span> <br>
              <strong>Data de Nascimento:</strong> <span id="clienteDataNasc"></span>
            </p>
          </div>
        </div>
      </div>

      <!-- Informações do Agendamento -->
      <div class="col-md-4">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Agendamento</h5>
            <p class="card-text">
              <strong>Data e Hora:</strong> <span id="agendamentoDataHora"></span> <br>
              <strong>Status:</strong> <span id="agendamentoStatus"></span>
            </p>
          </div>
        </div>
      </div>

      <!-- Informações do Serviço -->
      <div class="col-md-4">
        <div class ="card">
          <div class="card-body">
            <h5 class="card-title">Serviço</h5>
            <p class="card-text">
              <strong>Nome:</strong> <span id="servicoNome"></span> <br>
              <strong>Descrição:</strong> <span id="servicoDescricao"></span> <br>
              <strong>Duração:</strong> <span id="servicoDuracao"></span>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Botão para voltar para a página de Clientes e Pacotes -->
    <a class="btn btn-primary mt-3" href="cliente-pacote.html">Voltar para Clientes e Pacotes</a>
    <a class="btn btn-primary mt-3" href="concluirServico.html">Voltar para Page ConcluirServicos</a>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    async function fetchInformacoesPorId() {
      const clienteId = document.getElementById('clienteIdInput').value;

      try {
        const response = await axios.get(`http://localhost:8080/informacoes/${clienteId}`);
        const cliente = response.data;

        if (cliente) {
          const agendamento = cliente.Agendamentos[0];
          const servico = agendamento.Servico;
          const pacote = cliente.Pacote;

          // Atualize os elementos HTML com os dados do cliente
          document.getElementById('clienteNome').textContent = cliente.nome;
          document.getElementById('clienteTelefone').textContent = cliente.telefone;
          document.getElementById('clienteEmail').textContent = cliente.email;
          document.getElementById('clienteNomePacote').textContent = pacote.nomePacote;
          document.getElementById('clienteIdasRestantes').textContent = cliente.idasRestantes;
          document.getElementById('clienteDataNasc').textContent = cliente.dataNascimento;

          document.getElementById('agendamentoDataHora').textContent = agendamento.dataHoraAgendamento;
          document.getElementById('agendamentoStatus').textContent = agendamento.statusAgendamento;

          document.getElementById('servicoNome').textContent = servico.nomeServico;
          document.getElementById('servicoDescricao').textContent = servico.descricao;
          document.getElementById('servicoDuracao').textContent = servico.duracao;
        } else {
          alert('Cliente não encontrado.');
        }
      } catch (error) {
        console.error(error);
      }
    }
  </script>
</body>
</html>
