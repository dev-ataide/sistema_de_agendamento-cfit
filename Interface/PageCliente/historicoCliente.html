<!DOCTYPE html>
<html>
<head>
    <title>Histórico de Agendamentos</title>
    <!-- Inclua o Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa;
        }

        .container {
            background-color: #ffffff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #343a40;
        }

        h2 {
            color: #007bff;
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            padding: 10px 0;
            border-bottom: 1px solid #dee2e6;
        }

        p {
            color: #6c757d;
        }

        #historico-agendamentos {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">Histórico de Agendamentos do Cliente</h1>
        <div id="historico-agendamentos">
            <!-- As informações do histórico de agendamentos do cliente serão preenchidas dinamicamente aqui -->
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<!-- ... outras partes do seu código ... -->
<script>
    // Função para buscar o ID do cliente a partir dos parâmetros da URL
    function getClienteIdFromURL() {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get('id');
    }

    // Função para buscar e preencher o histórico de agendamentos do cliente
    async function fetchHistoricoAgendamentos() {
        const clienteId = getClienteIdFromURL(); // Obtém o ID do cliente a partir da URL
        if (clienteId) {
            try {
                const response = await axios.get(`http://localhost:8080/informacoes/${clienteId}`);
                const cliente = response.data;

                if (response.status === 200) {
                    const historicoAgendamentos = document.getElementById('historico-agendamentos');
                    historicoAgendamentos.innerHTML = '';

                    // Exibe informações do cliente
                    const nomeCliente = document.createElement('h2');
                    nomeCliente.textContent = `Nome do Cliente: ${cliente.nome}`;
                    historicoAgendamentos.appendChild(nomeCliente);

                    const idCliente = document.createElement('p');
                    idCliente.textContent = `ID do Cliente: ${cliente.id}`;
                    historicoAgendamentos.appendChild(idCliente);

                    // Exibe os agendamentos com nome do serviço
                    if (cliente.Agendamentos && cliente.Agendamentos.length > 0) {
                        const ulElement = document.createElement('ul');
                        cliente.Agendamentos.forEach(agendamento => {
                            const liElement = document.createElement('li');
                            liElement.textContent = `Data: ${agendamento.dataHoraAgendamento}, Serviço: ${agendamento.Servico.nomeServico}`;
                            ulElement.appendChild(liElement);
                        });

                        historicoAgendamentos.appendChild(ulElement);
                    } else {
                        historicoAgendamentos.textContent = 'Nenhum agendamento encontrado para este cliente.';
                    }
                } else {
                    console.error('Erro ao buscar histórico de agendamentos do cliente');
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
            }
        } else {
            console.error('ID do cliente não encontrado nos parâmetros da URL.');
        }
    }

    // Carregue o histórico de agendamentos do cliente ao carregar a página
    fetchHistoricoAgendamentos();
</script>
<!-- ... outras partes do seu código ... -->
</body>
</html>
